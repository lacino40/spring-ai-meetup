## Description

This project is a demonstration of integrating **Spring AI** capabilities within a Spring-based application.

## Features

- ### Prompt 
  The **Prompt** allows to input dynamic prompts or messages that are processed to generate relevant AI-driven responses. 

- ### Prompt stuffing
  **Prompt stuffing** involves combining multiple pieces of information into a single prompt to provide the AI with richer 
context for generating more accurate and relevant responses.

- ### Retrieval-Augmented Generation (RAG)
  **RAG** combines the power of information retrieval with AI-generated responses to enhance relevance of outputs. By 
integrating a vector database, the AI can retrieve relevant context or knowledge and seamlessly incorporate it into 
responses.

- ### Functions
  The **functions** feature enables structured interactions by allowing developers to define specific functions that 
the AI can call during a conversation.

- ### Audio Text-to-Speech (TTS)
  Converts user-provided text into natural-sounding audio.

- ### Image generation
  Allows users to input descriptive prompts, generating unique and custom AI-driven images dynamically.

- ### Multi AI model integration 
  Showcases the use of multiple AI models - **OpenAI** and **Ollama** - within a single application.

## Setup and Usage
### Prerequisites

Before you begin, ensure you have met the following requirements
- `Java Development Kit (JDK) version 21` or later
- `openai.key` **(mandatory)** - is a key used to authenticate requests to OpenAI's API
- `service.weather.open-weather.api-key` **(optional)** - is a key that stores the unique API key required to access data from the
  OpenWeatherMap API.

Project uses `Spring AI version 1.0.0-M6`

To generate and obtain `openai.key` API key:
1. Visit [OpenAI's website](https://platform.openai.com/) and log in with your credentials. If you don’t have an account, create one by signing up.
2. Navigate to your account settings by clicking on your profile icon in the top right corner. Select **"API Keys"** from the dropdown menu or go directly to the [API Keys page](https://platform.openai.com/account/api-keys).
3. Click on the **"Create new secret key"** button. A dialog box will appear with your newly generated API key. **Copy this key immediately**, as you will not be able to view it again later.
4. Add the copied API key to configuration as required

To generate and obtain `service.weather.open-weather.api-key` API key:
1. Visit the OpenWeatherMap website at https://openweathermap.org/
2. Create an account or log in if you already have an account
3. On successful login, navigate to the `My API Keys` menu in the account settings.
4. You will see your unique API Key, or you can generate a new one if you prefer. This key is alphanumeric.

However, if `service.weather.open-weather.api-key` is not provided or invalid, the weather service has fail-safe
mechanism implemented. It will fall back to use mock data for weather information. This mock data is stored in a file
named `open-weather-mock.json`, which is part of application's resources. This file contains pre-set, static weather
data.

### Run
- build the project: `mvn clean install`
- run the application: `java -jar target/spring-ai-meetup-1.0-SNAPSHOT.jar -Dopenai.key=<open-ai-key> -Dservice.weather.open-weather.api-key=<open-weather-api-key>`

### REST Endpoints
The application provides a set of **RESTful endpoints** to enable interaction with its OpenAI services.

1. **GET `/ai/chat`**  
   **Description:**
   Generates a chat response based on the user-provided prompt
   
   **Request Parameters:**
   - `prompt` (optional, query parameter): The user-inputted message or prompt for the AI chatbot
   
   **Response:**
   
   A stream of strings containing the AI-generated response

 ---   

2. **GET `/ai/chat/tts`**  
   **Description:**
   Generates a chat response based on the user prompt and converts the response to speech using the Text-to-Speech (TTS) feature
   
   **Request Parameters:**
   - `prompt` (optional, query parameter): The user-inputted message or prompt for the AI chatbot

   **Response:**

   The chat response text (string) which was also converted to speech and played asynchronously

 ---

3. **GET `/ai/stuffing`**  
   **Description:**
   Generates a response based on a user-provided question. You can optionally include additional context in the input model by enabling "stuffing"

   **Request Parameters:**
   - `stuff` (optional, query parameter): A boolean flag indicating whether to enable additional context ("stuffing"). Defaults to `false`
   - `question` (optional, query parameter): The user-provided question

   **Response:**

   The chat response text (string) which was also converted to speech and played asynchronously

  ---

4. **GET `/ai/rag`**  
   **Description:**
   Returns a response generated by combining the user’s question with relevant context retrieved through similarity search on stored documents

   **Request Parameters:**
   - `question` (optional, query parameter): The user-provided question

   **Response:**

   A string containing the AI-generated response, taking into account the context retrieved from the similarity search

  ---

5. **GET `/ai/rag/advisor`**  
   **Description:**
   Generates an AI response to the user's question using advisors to enhance the response
   The advisors used are:
   - `SafeGuardAdvisor`: Ensures the response omits inappropriate content (e.g., "fool", "stupid")
   - `QuestionAnswerAdvisor`: Uses a similarity search on stored documents to provide content-relevant answers

   **Request Parameters:**
   - `question` (optional, query parameter): The user-provided question

   **Response:**
   
   A string containing the AI-generated response, taking into account the context retrieved from the similarity search

  ---

6. **GET `/ai/forecast`**  
   **Description:**
   Retrieves the current weather forecast for a specified city by leveraging a tool callback

   **Request Parameters:**
   - `city` (optional, query parameter): The name of the city for which to fetch the weather. Defaults to `"London"` if no input is provided

   **Response:**

   A string containing the weather forecast for the specified city

  ---

7. **GET `/ai/movie`**  
   **Description:**
    Streams details about movies belonging to a specified franchise

   **Request Parameters:**
   - `franchise` (optional, query parameter): The movie franchise to retrieve details for

   **Response:**

   Information about the movies in the specified franchise

---

8. **GET `/ai/movie/json`**  
   **Description:** 
   Fetches structured details about movies in a specified franchise, such as the title, year, director, and description, as a JSON list

   **Request Parameters:**
   - `franchise` (optional, query parameter): The movie franchise to retrieve details for

   **Response:**
    - A JSON list of movie objects with the following structure:
        - `title` (String): The movie's title
        - `year` (int): The release year
        - `director` (String): The movie's director
        - `description` (String): A brief description of the movie
 
---

9. **GET `/ai/tts`**  
   **Description:**
   Converts provided text to speech and plays the generated audio asynchronously

   **Request Parameters:**
   - `prompt` (optional, query parameter): The input text to be converted into speech

   **Response:**

   Returns the original input text submitted for text-to-speech conversion

---

10. **GET `/ai/image`**  
    **Description:**
    Generates an image based on the provided text prompt using the configured AI image generation model and returns the image data

    **Request Parameters:**
    - `prompt` (optional, query parameter): The text describing the image to generate

    **Response:**

    Returns the image data as a byte array with the `Content-Type` set to `image/jpeg`